<%layout("./layout.ejs")%>
<div class="offset-3 mt-5">
  <form action="/add" method="POST">
    <div class="mb-3 col-7">
      <label for="enterTask" class="form-label">Enter Task Title</label>
      <input type="text" name="title" class="form-control" required />
    </div>

    <div class="col-7">
      <label for="enterDescription" class="form-label">Enter Description</label>
      <textarea name="description" class="form-control"></textarea>
    </div>
    <br />
    <button type="submit" class="btn btn-outline-success">Add Task</button>
  </form>
  <br />

  <ul>
    <% tasks.forEach(task => { %>
    <li class="mt-3">
      <strong><%= task.title %></strong> - <%= task.description %> <% if
      (!task.completed) { %>
      <form
        action="/complete/<%= task._id %>"
        method="POST"
        style="display: inline"
      >
        <button type="submit" class="btn ms-3 btn-sm btn-outline-success">
          Mark as Completed
        </button>
      </form>
      <form action="/edit/<%= task._id %>" method="GET" style="display: inline">
        <button type="submit" class="btn btn-sm ms-3 btn-outline-success">
          Edit
        </button>
      </form>

      <% } else { %>
      <i class="fa-regular fa-circle-check"></i>
      <% } %>
      <form
        action="/delete/<%= task._id %>"
        method="POST"
        style="display: inline"
      >
        <button type="submit" class="btn btn-sm ms-3 btn-outline-success">
          Delete
        </button>
      </form>
    </li>
    <% }) %>
  </ul>
</div>
